(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,a){e.exports=a(201)},108:function(e,t,a){},133:function(e,t){},201:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(11),s=a.n(l),c=(a(108),a(16)),i=a(17),o=a(19),u=a(18),h=a(20),m=a(13),p=(a(32),a(96)),d=a.n(p)()(Object({NODE_ENV:"production",PUBLIC_URL:""}).SOCKET||"http://localhost:3001");var y=a(208),f=a(205),E=a(204),b=a(213),C=a(206),v=a(202),g=a(211),w=a(209),S=a(210),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={show:!1},a.handleShow=a.handleShow.bind(Object(m.a)(Object(m.a)(a))),a.handleClose=a.handleClose.bind(Object(m.a)(Object(m.a)(a))),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{bsStyle:"success",onClick:this.handleShow},"Create channel"),r.a.createElement(S.a,{show:this.state.show,onHide:this.handleClose},r.a.createElement(S.a.Header,{closeButton:!0},r.a.createElement(S.a.Title,null,"Cr\xe9er un salon")),r.a.createElement(S.a.Body,null,r.a.createElement(v.a,{onSubmit:function(t){t.preventDefault(),e.props.onCreateChannel(e.state.channelName),e.handleClose()},inline:!0},r.a.createElement(g.a,{type:"text",value:this.state.channelName||"",placeholder:"Nom du salon",onChange:function(t){e.setState({channelName:t.target.value})}}),r.a.createElement(b.a,{type:"submit"},"Valider")))))}}]),t}(n.Component),O=a(212),j=a(203),N=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=r.a.Fragment,a={};return this.props.definition&&this.props.definition.length>0&&(t=O.a,a={placement:"top",id:this.props.definition.toLowerCase().replace(" ","_"),overlay:r.a.createElement(j.a,null,this.props.definition)}),r.a.createElement(t,a,r.a.createElement(E.a,{sm:6,md:3},r.a.createElement("div",{className:"card",style:{width:"20rem"},onClick:function(){return e.props.onClick&&e.props.onClick()}},r.a.createElement("div",{className:"card-body",style:{border:this.props.checked?"3px solid red":""}},r.a.createElement("p",{className:"card-text"},this.props.value)))))}}]),t}(n.Component),x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={answerSelectNum:1},a.handleChange=a.handleChange.bind(Object(m.a)(Object(m.a)(a))),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.currentChannel.deckQuestions[0].text;if(t!==e.currentChannel.deckQuestions[0].text){var a=(t.match(/______/g)||[]).length;this.setState({answerSelectNum:a})}}},{key:"handleChange",value:function(e){var t,a,n=this.props.player.answers.indexOf(e);n<0?this.props.player.answers.length>=this.state.answerSelectNum?console.warn("Vous ne pouvez pas jouer davantage de r\xe9ponses pour cette question !"):this.props.player.answers.push(e):this.props.player.answers.splice(n,1),t=this.props.currentChannel.id,a=this.props.player.answers,d.emit("selectedAnswers",t,a)}},{key:"getFilledQuestionText",value:function(e,t){var a=this.props.currentChannel.deckQuestions[0].text;return e.map(function(e){return a=a.replace("______",t[e].text)}),a}},{key:"render",value:function(){var e=this;if(this.props.player&&this.props.player.hand){if("JUDGING_CARD"===this.props.currentChannel.currentStatus){for(var t=this.props.currentChannel.players.slice(),a=t.length-1;a>0;a-=1){var n=Math.floor(Math.random()*(a+1)),l=[t[n],t[a]];t[a]=l[0],t[n]=l[1]}return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null,r.a.createElement(r.a.Fragment,null,t.map(function(t){return t.isGameMaster?null:r.a.createElement(N,{key:"p"+t.id,value:e.getFilledQuestionText(t.answers,t.hand),onClick:e.props.player.isGameMaster?function(){return a=e.props.currentChannel.id,n=t.id,void d.emit("selectedJudgment",a,n);var a,n}:function(){}})}))))}if("WAITING_GAME"===this.props.currentChannel.currentStatus){var s=this.props.currentChannel.players.find(function(e){return e.isGameMaster});return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null,r.a.createElement("p",null,"Le gagnant de la manche est ",s.name," :"),r.a.createElement(N,{key:"p"+s.id,value:this.getFilledQuestionText(s.answers,s.hand),onClick:function(){}})),r.a.createElement(f.a,null,this.props.player.hand.map(function(e,t){return r.a.createElement(N,{key:e.text,value:e.text,definition:e.definition,onClick:function(){}})})))}return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null,r.a.createElement(N,{key:"questioncard",value:this.getFilledQuestionText(this.props.player.answers,this.props.player.hand)})),r.a.createElement(f.a,null,this.props.player.hand.map(function(t,a){return r.a.createElement(N,{key:t.text,value:t.text,definition:t.definition,onClick:e.props.player.isGameMaster?function(){}:function(){return e.handleChange(a)},checked:e.props.player.answers.indexOf(a)>=0})})))}return null}}]),t}(n.Component),_=a(207),F=function(e){var t=e.value,a=e.noScore;return r.a.createElement(r.a.Fragment,null,r.a.createElement("dt",null,t.isGameMaster?">":"",r.a.createElement(C.a,null,t.name),!a&&r.a.createElement(_.a,null,t.score," pt(s)")))},G=function(e){var t=e.players;return r.a.createElement("dl",null,t.map(function(e){return r.a.createElement(f.a,{key:e.id},r.a.createElement(F,{value:e}))}))},A=3e3,P=1e4,I=function(e){function t(e){var a,n;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={playerName:(JSON.parse(localStorage.getItem("utl-player"))||[]).name||""},n=function(e){a.setState({error:e}),setTimeout(function(){a.setState({error:""})},A)},d.on("err",function(e){return n(e)}),function(e){d.on("success",function(t){return e(t)})}(function(e){a.setState({success:e}),setTimeout(function(){a.setState({success:""})},P)}),function(e){d.on("updateLobby",function(t){e(null,t.lobby)})}(function(e,t){var n={waitingPlayers:[],channels:[]};a.state.lobby&&(a.state.lobby.waitingPlayers&&(n.waitingPlayers=a.state.lobby.waitingPlayers),a.state.lobby.channels&&(n.channels=a.state.lobby.channels)),t.channels&&(n.channels=t.channels),t.waitingPlayers&&(n.waitingPlayers=t.waitingPlayers),a.setState({lobby:n})}),function(e){d.on("updateChannel",function(t){e(null,t.channel)})}(function(e,t){var n=t.players.find(function(e){return e.id===a.state.player.id});a.setState({player:n,currentChannel:t})}),a.onCreateChannel=a.onCreateChannel.bind(Object(m.a)(Object(m.a)(a))),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"onCreateChannel",value:function(e){!function(e){d.emit("createChannel",e)}(e)}},{key:"renderStep",value:function(){var e=this;return this.state.currentChannel?r.a.createElement(y.a,null,r.a.createElement(f.a,null,this.state.player.name!==this.state.currentChannel.admin.name||"WAITING_GAME"!==this.state.currentChannel.currentStatus&&"IDLE"!==this.state.currentChannel.currentStatus?r.a.createElement("div",null):r.a.createElement(E.a,{sm:4},r.a.createElement(b.a,{onClick:function(){var t;t=e.state.currentChannel.id,d.emit("nextRound",t)}},"Next round")),r.a.createElement(E.a,{sm:4},r.a.createElement("h1",null,r.a.createElement(C.a,null,this.state.currentChannel.name)),r.a.createElement("h3",null,this.state.player.isGameMaster?"".concat(this.state.player.name," c'est vous le patron !"):"".concat(this.state.player.name," \xe0 vous de jouer !")),r.a.createElement(G,{players:this.state.currentChannel.players}))),r.a.createElement(f.a,null,r.a.createElement(x,{player:this.state.player,currentChannel:this.state.currentChannel}))):this.state.lobby&&this.state.player?r.a.createElement(f.a,null,r.a.createElement(E.a,{sm:4},r.a.createElement(k,{onCreateChannel:this.onCreateChannel})),r.a.createElement(E.a,{sm:4},r.a.createElement("h1",null,r.a.createElement(C.a,null,"PLAYERS")),this.state.lobby.waitingPlayers.map(function(e,t){return r.a.createElement(F,{value:e,noScore:!0})})),r.a.createElement(E.a,{sm:4},r.a.createElement("h1",null,r.a.createElement(C.a,null,"CHANNELS")),this.state.lobby.channels.map(function(e,t){return r.a.createElement(v.a,{key:t,inline:!0},r.a.createElement(b.a,{onClick:function(){var t;t=e.id,d.emit("gotoChannel",t)}},e.name))}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{onSubmit:function(t){var a,n;t.preventDefault(),a=e.state.playerName,n=function(t,a){localStorage.setItem("utl-player",JSON.stringify(a)),e.setState({player:a})},d.emit("createPlayer",a),d.on("playerCreated",function(e){return n(null,e.player)})},inline:!0},r.a.createElement(g.a,{type:"text",value:this.state.playerName||"",placeholder:"Name",onChange:function(t){e.setState({playerName:t.target.value})}}),r.a.createElement(b.a,{bsStyle:"success",type:"submit"},"Ok")))}},{key:"render",value:function(){return r.a.createElement(y.a,null,r.a.createElement(f.a,{className:"App"},r.a.createElement("h1",null,"Under the limits"),r.a.createElement("header",{className:"App-header"},this.state.error?r.a.createElement(w.a,{bsStyle:"danger"},this.state.error):r.a.createElement("p",null),this.state.success?r.a.createElement(w.a,{bsStyle:"success"},this.state.success):r.a.createElement("p",null),r.a.createElement("div",{className:"App"},this.renderStep()))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},32:function(e,t,a){}},[[103,2,1]]]);
//# sourceMappingURL=main.bef8dfac.chunk.js.map